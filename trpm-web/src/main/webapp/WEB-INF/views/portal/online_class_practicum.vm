#set($layout = "/portal/online_class_layout.vm")

<div class="vk-content ng-scope">
	<div class="classroom ng-scope">
    
	    <section class="topSection">
			#** TOP A *#
			<div class="actionBar">
		        #**1.课程标题 *#
		        <div class="classroomLabelGroup">
		            <div class="logo"></div>
		            <div class="classroomLabel">Classroom</div>
		            <div class="lessonName ng-binding" style="white-space:nowrap; overflow:hidden; text-overflow:ellipsis; width:492px;">
		              <a href="javascript:;" style="color: white; text-decoration: none;" title="$!{lesson.serialNumber}:$!{lesson.name}($!{student.englishName})">
		                $!{lesson.serialNumber} : $!{lesson.name}($!{student.englishName})
		              </a>
		            </div>
		        </div>
	                
		        #**2.反馈和退出 *#
		        <div class="rightActionBarGroup2">
	                ##报告不存在的P课程
	                <div onclick="require('classpracticum').showFeedBackForm('$!classtime')">Add Feedback</div>
	                #if(!$isReplay)
						<div class="lastAction"><a href="http://help.duobeiyun.com/room/test/?result=http://app-proxy.vipkid.com.cn/api/service/public/ittest/callback&amp;lang=en&amp;role=TEACHER&amp;id=$teacher.id" style="color: red;" target="_blank">Test your computer</a></div>   
	                #end
		            <div class="lastAction"> <a href="javascript:;" onclick="require('classpracticum').confirmExitClassroom('$!onlineClass.id', '$!student.id')"  style="color: white;">Exit Classroom</a></div> 
		        </div>
		        
		        #**3.倒计时显示 *#
		        <div class="rightActionBarGroup">
		            <label id="countTimeDiv" class="classTime ng-scope ng-binding"> </label> <label class="classTimeLog ng-hide"> </label>
		        </div>	
	    	</div>
	    </section> 
	    
	    ##body start        
		<div class="container">
		    <div class="mainContainer">
			 	##教室加载
				<iframe id="xuedianyun" name="xuedianyun" width="1300" height="580" frameborder="0" scrolling="no" src="$!url"></iframe>
				 
				<div class="container practicumClassroom">
					##feedback
					#parse("/portal/online_class_practicum_feedback.vm")
				</div>
			</div>
		</div>
		##body end
	</div>
</div>

#@requireJs()
	require(['classpracticum'], function(classpracticum){
    	classpracticum.init("$!serverTime", "$!scheduleTime","$!teacherApplication.result",$!{practicum2},"$!{teacherPe.teacherAction}",$!{PESupervisor});    
        #if($studentUser.createDateTime)
          classpracticum.sendTeacherInClassroom("$!onlineClass.id");
        #end
        classpracticum.openSessionStorage("$!onlineClass.id");
        #if(0!=$!{teacherApplication.auditorId})
        $("input[type=radio]").prop("disabled","disabled");
        #end
    });
        
    ##通道选择加载js
    ## 2代表多贝云
    #if(${onlineClass.supplierCode} == 2)
        require(['dbyproxy'], function(dby){
            dby.initChannel($!{TRPM_USER.id}, "$!onlineClass.classroom", true, "$!stars");
        });    
    #else
        require(['xdyproxy'], function(xdy){
            xdy.initChannel($!{TRPM_USER.id}, "$!onlineClass.classroom", true, "$!stars");
        });  
    #end      
#end

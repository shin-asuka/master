var swfobject=function(){function e(){if(!P){try{var e=R.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(t){return}P=!0;for(var n=J.length,i=0;n>i;i++)J[i]()}}function t(e){P?e():J[J.length]=e}function n(e){if(typeof F.addEventListener!=A)F.addEventListener("load",e,!1);else if(typeof R.addEventListener!=A)R.addEventListener("load",e,!1);else if(typeof F.attachEvent!=A)w(F,"onload",e);else if("function"==typeof F.onload){var t=F.onload;F.onload=function(){t(),e()}}else F.onload=e}function i(){x?a():r()}function a(){var e=R.getElementsByTagName("body")[0],t=g(_);t.setAttribute("type",B);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=A){var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),G.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(10>i)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,r()}()}else r()}function r(){var e=V.length;if(e>0)for(var t=0;e>t;t++){var n=V[t].id,i=V[t].callbackFn,a={success:!1,id:n};if(G.pv[0]>0){var r=y(n);if(r)if(!m(V[t].swfVersion)||G.wk&&G.wk<312)if(V[t].expressInstall&&s()){var u={};u.data=V[t].expressInstall,u.width=r.getAttribute("width")||"0",u.height=r.getAttribute("height")||"0",r.getAttribute("class")&&(u.styleclass=r.getAttribute("class")),r.getAttribute("align")&&(u.align=r.getAttribute("align"));for(var c={},f=r.getElementsByTagName("param"),p=f.length,v=0;p>v;v++)"movie"!=f[v].getAttribute("name").toLowerCase()&&(c[f[v].getAttribute("name")]=f[v].getAttribute("value"));d(u,c,n,i)}else l(r),i&&i(a);else h(n,!0),i&&(a.success=!0,a.ref=o(n),i(a))}else if(h(n,!0),i){var g=o(n);g&&typeof g.SetVariable!=A&&(a.success=!0,a.ref=g),i(a)}}}function o(e){var t=null,n=y(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=A)t=n;else{var i=n.getElementsByTagName(_)[0];i&&(t=i)}return t}function s(){return!W&&m("6.0.65")&&(G.win||G.mac)&&!(G.wk&&G.wk<312)}function d(e,t,n,i){W=!0,S=i||null,T={success:!1,id:n};var a=y(n);if(a){"OBJECT"==a.nodeName?(I=u(a),C=null):(I=a,C=n),e.id=O,(typeof e.width==A||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==A||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),R.title=R.title.slice(0,47)+" - Flash Player Installation";var r=G.ie&&G.win?"ActiveX":"PlugIn",o="MMredirectURL="+F.location.toString().replace(/&/g,"%26")+"&MMplayerType="+r+"&MMdoctitle="+R.title;if(typeof t.flashvars!=A?t.flashvars+="&"+o:t.flashvars=o,G.ie&&G.win&&4!=a.readyState){var s=g("div");n+="SWFObjectNew",s.setAttribute("id",n),a.parentNode.insertBefore(s,a),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}c(e,t,n)}}function l(e){if(G.ie&&G.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(u(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(u(e),e)}function u(e){var t=g("div");if(G.win&&G.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(_)[0];if(n){var i=n.childNodes;if(i)for(var a=i.length,r=0;a>r;r++)1==i[r].nodeType&&"PARAM"==i[r].nodeName||8==i[r].nodeType||t.appendChild(i[r].cloneNode(!0))}}return t}function c(e,t,n){var i,a=y(n);if(G.wk&&G.wk<312)return i;if(a)if(typeof e.id==A&&(e.id=n),G.ie&&G.win){var r="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?r+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(r+=" "+o+'="'+e[o]+'"'));var s="";for(var d in t)t[d]!=Object.prototype[d]&&(s+='<param name="'+d+'" value="'+t[d]+'" />');a.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+r+">"+s+"</object>",D[D.length]=e.id,i=y(e.id)}else{var l=g(_);l.setAttribute("type",B);for(var u in e)e[u]!=Object.prototype[u]&&("styleclass"==u.toLowerCase()?l.setAttribute("class",e[u]):"classid"!=u.toLowerCase()&&l.setAttribute(u,e[u]));for(var c in t)t[c]!=Object.prototype[c]&&"movie"!=c.toLowerCase()&&f(l,c,t[c]);a.parentNode.replaceChild(l,a),i=l}return i}function f(e,t,n){var i=g("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function p(e){var t=y(e);t&&"OBJECT"==t.nodeName&&(G.ie&&G.win?(t.style.display="none",function(){4==t.readyState?v(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function v(e){var t=y(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function y(e){var t=null;try{t=R.getElementById(e)}catch(n){}return t}function g(e){return R.createElement(e)}function w(e,t,n){e.attachEvent(t,n),H[H.length]=[e,t,n]}function m(e){var t=G.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function b(e,t,n,i){if(!G.ie||!G.mac){var a=R.getElementsByTagName("head")[0];if(a){var r=n&&"string"==typeof n?n:"screen";if(i&&(N=null,L=null),!N||L!=r){var o=g("style");o.setAttribute("type","text/css"),o.setAttribute("media",r),N=a.appendChild(o),G.ie&&G.win&&typeof R.styleSheets!=A&&R.styleSheets.length>0&&(N=R.styleSheets[R.styleSheets.length-1]),L=r}G.ie&&G.win?N&&typeof N.addRule==_&&N.addRule(e,t):N&&typeof R.createTextNode!=A&&N.appendChild(R.createTextNode(e+" {"+t+"}"))}}}function h(e,t){if(U){var n=t?"visible":"hidden";P&&y(e)?y(e).style.visibility=n:b("#"+e,"visibility:"+n)}}function E(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=A?encodeURIComponent(e):e}{var I,C,S,T,N,L,A="undefined",_="object",j="Shockwave Flash",k="ShockwaveFlash.ShockwaveFlash",B="application/x-shockwave-flash",O="SWFObjectExprInst",M="onreadystatechange",F=window,R=document,$=navigator,x=!1,J=[i],V=[],D=[],H=[],P=!1,W=!1,U=!0,G=function(){var e=typeof R.getElementById!=A&&typeof R.getElementsByTagName!=A&&typeof R.createElement!=A,t=$.userAgent.toLowerCase(),n=$.platform.toLowerCase(),i=/win/.test(n?n:t),a=/mac/.test(n?n:t),r=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,o=!1,s=[0,0,0],d=null;if(typeof $.plugins!=A&&typeof $.plugins[j]==_)d=$.plugins[j].description,!d||typeof $.mimeTypes!=A&&$.mimeTypes[B]&&!$.mimeTypes[B].enabledPlugin||(x=!0,o=!1,d=d.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(d.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(d.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(d)?parseInt(d.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof F.ActiveXObject!=A)try{var l=new ActiveXObject(k);l&&(d=l.GetVariable("$version"),d&&(o=!0,d=d.split(" ")[1].split(","),s=[parseInt(d[0],10),parseInt(d[1],10),parseInt(d[2],10)]))}catch(u){}return{w3:e,pv:s,wk:r,ie:o,win:i,mac:a}}();!function(){G.w3&&((typeof R.readyState!=A&&"complete"==R.readyState||typeof R.readyState==A&&(R.getElementsByTagName("body")[0]||R.body))&&e(),P||(typeof R.addEventListener!=A&&R.addEventListener("DOMContentLoaded",e,!1),G.ie&&G.win&&(R.attachEvent(M,function(){"complete"==R.readyState&&(R.detachEvent(M,arguments.callee),e())}),F==top&&!function(){if(!P){try{R.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),G.wk&&!function(){return P?void 0:/loaded|complete/.test(R.readyState)?void e():void setTimeout(arguments.callee,0)}(),n(e)))}(),function(){G.ie&&G.win&&window.attachEvent("onunload",function(){for(var e=H.length,t=0;e>t;t++)H[t][0].detachEvent(H[t][1],H[t][2]);for(var n=D.length,i=0;n>i;i++)p(D[i]);for(var a in G)G[a]=null;G=null;for(var r in swfobject)swfobject[r]=null;swfobject=null})}()}return{registerObject:function(e,t,n,i){if(G.w3&&e&&t){var a={};a.id=e,a.swfVersion=t,a.expressInstall=n,a.callbackFn=i,V[V.length]=a,h(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return G.w3?o(e):void 0},embedSWF:function(e,n,i,a,r,o,l,u,f,p){var v={success:!1,id:n};G.w3&&!(G.wk&&G.wk<312)&&e&&n&&i&&a&&r?(h(n,!1),t(function(){i+="",a+="";var t={};if(f&&typeof f===_)for(var y in f)t[y]=f[y];t.data=e,t.width=i,t.height=a;var g={};if(u&&typeof u===_)for(var w in u)g[w]=u[w];if(l&&typeof l===_)for(var b in l)typeof g.flashvars!=A?g.flashvars+="&"+b+"="+l[b]:g.flashvars=b+"="+l[b];if(m(r)){var E=c(t,g,n);t.id==n&&h(n,!0),v.success=!0,v.ref=E}else{if(o&&s())return t.data=o,void d(t,g,n,p);h(n,!0)}p&&p(v)})):p&&p(v)},switchOffAutoHideShow:function(){U=!1},ua:G,getFlashPlayerVersion:function(){return{major:G.pv[0],minor:G.pv[1],release:G.pv[2]}},hasFlashPlayerVersion:m,createSWF:function(e,t,n){return G.w3?c(e,t,n):void 0},showExpressInstall:function(e,t,n,i){G.w3&&s()&&d(e,t,n,i)},removeSWF:function(e){G.w3&&p(e)},createCSS:function(e,t,n,i){G.w3&&b(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=R.location.search||R.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return E(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return E(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var e=y(O);e&&I&&(e.parentNode.replaceChild(I,e),C&&(h(C,!0),G.ie&&G.win&&(I.style.display="block")),S&&S(T)),W=!1}}}}(),SRC,scripts=document.getElementsByTagName("script");SRC=scripts[scripts.length-1].src.split("/"),SRC.splice(-1,1),SRC=SRC.join("/");var Duobeiyun=function(){function e(e,t){(1==b.debug||1==arguments[arguments.length-1])&&console.log(arguments)}function t(e){return(e+"").replace(/(^[\s\t]*)|([\s\t]*$)/g,"")}function n(e,t){window.bridgeJsInterface.sendLog("&state=in_sdk_sendEvent");var n={event:e,option:t,ts:(new Date).getTime()};"swf"==w?v.sendMsgV1(n):"js"==w&&g.postMessage(JSON.stringify(n),"*")}function i(n){for(var i in n){var o=n[i];b[i]="string"==typeof o?t(o+""):o}if(""==b.uid)e("Error: uid为空。");else if(""==b.roomId)e("Error: roomId为空。");else{1==b.debug&&(I.debug=E),"swf"==w?r():a();var s="http://bridge-info.duobeiyun.com/bridge-info.gif?roomid="+b.roomId+"&uid="+b.uid;window.bridgeJsInterface={sendLog:function(e){var t=document.createElement("img");t.style.display="none",document.body.appendChild(t),t.onload=function(){setTimeout(function(){document.body.removeChild(t)},1e3)},t.src=s+e+"&t="+(new Date).getTime()}}}}function a(){swfobject.addDomLoadEvent(function(){var e;e=setInterval(function(){function t(e){var t=JSON.parse(e.data);if("duobeiyun_js_bridge_is_ready"==t.event){duobeiyunBridgeIsReady("js");var t={event:"duobeiyun_js_sdk_is_ready"};g.postMessage(JSON.stringify(t),"*")}else window.duobeiyunMsgHandler(t)}for(var n=document.getElementsByTagName("iframe"),i=0;i<n.length&&-1==n[i].src.indexOf("api.duobeiyun.com");i++);i!=n.length&&(clearInterval(e),y=n[i],g=y.contentWindow,window.addEventListener?window.addEventListener("message",function(e){t(e)}):window.attachEvent("onmessage",function(e){t(e)}))},500)})}function r(){swfobject.addDomLoadEvent(function(){var t=document.createElement("span");t.style.display="none",t.id="duobeiyun_bridge_swf_container",document.body.appendChild(t);var n=SRC+"/duobeiyun-js-sdk-0.1.1-bridge.swf";e("swfUrl: ",n);var i={uid:b.uid,roomId:b.roomId},a={allowScriptAccess:"always",wmode:"transparent"},r={id:"duobeiyun_bridge_swf",name:"duobeiyun_bridge_swf"},o=function(t){e(0==t.success?"bridge swf 初始化失败。":"bridge swf 初始化成功。"),v=document.getElementById("duobeiyun_bridge_swf")};swfobject.switchOffAutoHideShow(),swfobject.embedSWF(n,"duobeiyun_bridge_swf_container","1","1","9",!1,i,a,r,o)})}function o(t,i){window.bridgeJsInterface.sendLog("&state=in_sdk_trigger"),e("call duobeiyun.trigger: ",t,i),n(t,i)}function s(t,n){return window.bridgeJsInterface.sendLog("&state=in_sdk_on"),e("call duobeiyun.on: ",t,n),m[t]=n,this}function d(t){e("call duobeiyun.init: ",t,!0),i(t)}function l(t){e("call duobeiyun.ready: ",t),p=t}function u(){return m}function c(e,t){window.duobeiyunTriggerEvent(e,t)}function f(){window.duobeiyunBridgeFlashIsReady()}var p,v,y,g,w,m={},b={uid:"",roomId:"",debug:!1},h=!1;w="function"==typeof window.postMessage?"js":"swf",window.duobeiyunMsgHandler=function(t){window.bridgeJsInterface.sendLog("&state=in_sdk_duobeiyunMsgHandler"),e("call window.duobeiyunMsgHandler",t);var n=t.event,i=t.option;m[n](i)},window.duobeiyunBridgeIsReady=function(t){0==h&&(h=!0,window.bridgeJsInterface.sendLog("&state=in_sdk_duobeiyunBridgeIsReady"),e("room is ready. "+t),"function"==typeof p&&p())};var E={getEventHandlers:u,imitateFlashTriggerEvent:c,imitateFlashIsReady:f},I={init:d,ready:l,trigger:o,on:s};return I}();
(function($){$.fn.formValidator=function(options){$(this).click(function(){var merged_options=$.extend({},$.formValidator.defaults,options);var result=$.formValidator(merged_options);if(result&&jQuery.isFunction(merged_options.onSuccess)){merged_options.onSuccess();return false}else{if(!result&&jQuery.isFunction(merged_options.onError)){merged_options.onError();return false}else{return result}}})};$.formValidator=function(merged_options){var boolValid=true;var errorMsg="";$(merged_options.scope+" .error-both, "+merged_options.scope+" .error-same, "+merged_options.scope+" .error-input").removeClass("error-both").removeClass("error-same").removeClass("error-input");$(merged_options.scope+" .req-email, "+merged_options.scope+" .req-string, "+merged_options.scope+" .req-same, "+merged_options.scope+" .req-both, "+merged_options.scope+" .req-numeric, "+merged_options.scope+" .req-date, "+merged_options.scope+" .req-min, "+merged_options.scope+" .req-max, "+merged_options.scope+" .req-regex").each(function(){thisValid=$.formValidator.validate($(this),merged_options);boolValid=boolValid&&thisValid.error;if(!thisValid.error){errorMsg=thisValid.message}if(undefined!==$(this).attr("valid-options")){var validJson=$.parseJSON($(this).attr("valid-options"));errorMsg=validJson[thisValid.errorCss];if(undefined===errorMsg){errorMsg=thisValid.message}if(!thisValid.error){$(validJson.errorDiv).html(errorMsg).show()}else{$(validJson.errorDiv).hide()}}});if(!merged_options.extraBool()&&boolValid){boolValid=false;errorMsg=merged_options.extraBoolMsg}if((merged_options.scope!="")&&boolValid){$(merged_options.errorDiv).fadeOut()}if(!boolValid&&errorMsg!=""){var tempErr=(merged_options.customErrMsg!="")?merged_options.customErrMsg:errorMsg;$(merged_options.errorDiv).hide().html(tempErr).fadeIn()}return boolValid};$.formValidator.validate=function(obj,opts){var valAttr=(obj.val()==obj.attr("title"))?"":obj.val();var css=opts.errorClass;var mail_filter=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;var numeric_filter=/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)|(^-?\d*$)/;var empty_filter=/^\s*$/;var tmpresult=true;var result=true;var errorTxt="";var errorCss="";if(obj.hasClass("req-string")){tmpresult=(!empty_filter.test(valAttr))&&(valAttr!=obj.attr("title"));if(!tmpresult){errorTxt=opts.errorMsg.reqString;errorCss="req-string"}result=result&&tmpresult}if(obj.hasClass("req-same")){tmpresult=true;if(!empty_filter.test(valAttr)){group=obj.attr("rel");tmpresult=true;$(opts.scope+' .req-same[rel="'+group+'"]').each(function(){if($(this).val()!=valAttr||empty_filter.test(valAttr)){tmpresult=false}});if(!tmpresult&&!opts.silent){$(opts.scope+' .req-same[rel="'+group+'"]').addClass("error-same");errorTxt=opts.errorMsg.reqSame;errorCss="req-same"}else{$(opts.scope+' .req-same[rel="'+group+'"]').removeClass("error-same")}}result=result&&tmpresult}if(obj.hasClass("req-both")){tmpresult=true;if(!empty_filter.test(valAttr)){group=obj.attr("rel");$(opts.scope+' .req-both[rel="'+group+'"]').each(function(){if(empty_filter.test($(this).val())){tmpresult=false}});if(!tmpresult&&!opts.silent){$(opts.scope+' .req-both[rel="'+group+'"]').addClass("error-both");errorTxt=opts.errorMsg.reqBoth;errorCss="req-both"}else{$(opts.scope+' .req-both[rel="'+group+'"]').removeClass("error-both")}}result=result&&tmpresult}if(obj.hasClass("req-email")){tmpresult=true;if(!empty_filter.test(valAttr)){tmpresult=mail_filter.test(valAttr);if(!tmpresult){errorTxt=(empty_filter.test(valAttr))?opts.errorMsg.reqMailEmpty:opts.errorMsg.reqMailNotValid;errorCss="req-email"}}result=result&&tmpresult}if(obj.hasClass("req-date")){tmpresult=true;var arr=valAttr.split(opts.dateSeperator);if(empty_filter.test(valAttr)){tmpresult=true}else{if(arr.length<3){tmpresult=false}else{var year=arr[0]-0;var month=arr[1]-1;var day=arr[2]-0;if(year<1000||year>3000){tmpresult=false}var ms=(new Date(year,month,day)).getTime();arr=new Date();arr.setTime(ms);if(arr.getFullYear()!==year||arr.getMonth()!==month||arr.getDate()!==day){tmpresult=false}else{tmpresult=true}}}if(!tmpresult){errorTxt=opts.errorMsg.reqDate;errorCss="req-date"}result=result&&tmpresult}if(obj.hasClass("req-min")){tmpresult=(valAttr.length>=obj.attr("minlength"));if(!tmpresult&&!empty_filter.test(valAttr)){errorTxt=opts.errorMsg.reqMin.replace("%1",obj.attr("minlength"));errorCss="req-min"}result=result&&tmpresult}if(obj.hasClass("req-max")){tmpresult=(valAttr.replace(/[^\x00-\xff]/g,"**").length<=obj.attr("maxsize"));if(!tmpresult&&!empty_filter.test(valAttr)){errorTxt=opts.errorMsg.reqMax.replace("%1",obj.attr("maxsize"));errorCss="req-max"}result=result&&tmpresult}if(obj.hasClass("req-numeric")){tmpresult=true;if(!empty_filter.test(valAttr)){tmpresult=numeric_filter.test(valAttr);if(!tmpresult){errorTxt=opts.errorMsg.reqNum;errorCss="req-numeric"}}result=result&&tmpresult}if(obj.hasClass("req-regex")){tmpresult=true;if(!empty_filter.test(valAttr)){var regex_filter=eval(obj.attr("regex"));tmpresult=regex_filter.test(valAttr);if(!tmpresult){errorTxt=opts.errorMsg.reqRegex;errorCss="req-regex"}}result=result&&tmpresult}if(obj.attr("rel")){if(result){$("input[rel="+obj.attr("rel")+"]").removeClass(css)}else{if(!opts.silent){$("input[rel="+obj.attr("rel")+"]").addClass(css)}}}else{if(result){if(opts.errorTarget!=""){obj.parents(opts.errorTarget).removeClass(css)}else{obj.removeClass(css)}}else{if(opts.errorTarget!=""){obj.parents(opts.errorTarget).addClass(css)}else{obj.addClass(css)}}}return{error:result,message:errorTxt,errorCss:errorCss}};$.formValidator.defaults={silent:false,onSuccess:null,onError:null,scope:"",errorTarget:"",errorClass:"error-input",errorDiv:"#warn",errorMsg:{reqString:"Fill the required field",reqDate:"Date is not <b>valid</b>!",reqNum:"Just numeric field",reqMailNotValid:"E-Mail is not <b>valid</b>!",reqMailEmpty:"Please enter an e-mail.",reqSame:"Fields are <b>not</b> same!",reqBoth:"You have to fill same fields!",reqMin:"You have to enter at least %1 characters",reqMax:"You have to enter at the most %1 characters",reqRegex:"Fields is not match"},customErrMsg:"",extraBoolMsg:"Please check the form!",dateSeperator:"-",extraBool:function(){return true}}})(jQuery);
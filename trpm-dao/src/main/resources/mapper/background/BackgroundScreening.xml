<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="PeakTimeMapper">

    <sql id="backgroundScreeningColumns">bg_sterling_screening.id AS bg_sterling_screening_id, bg_sterling_screening.teacher_id AS
		bg_sterling_screening_teacher_id, bg_sterling_screening.candidate_id AS bg_sterling_screening_candidate_id,bg_sterling_screening.screening_id AS
		bg_sterling_screening_screening_id,bg_sterling_screening.status AS bg_sterling_screening_status,bg_sterling_screening.result AS bg_sterling_screening.dispute_status AS
		bg_sterling_screening_dispute_status,bg_sterling_screening.dispute_created_at AS bg_sterling_screening_dispute_created_at,bg_sterling_screening.submitted_at AS
		bg_sterling_screening_submitted_at,bg_sterling_screening.update_at AS bg_sterling_screening_update_at,bg_sterling_screening.web_link AS bg_sterling_screening_web_link,
		bg_sterling_screening.pdf_link AS bg_sterling_screening_pdf_link,bg_sterling_screening.create_time AS bg_sterling_screening-create_time,bg_sterling_screening.update_time AS
		bg_sterling_screening_update_time
	</sql>

    <sql id="backgroundScreeningWhere">
        <trim prefix="WHERE" prefixOverrides="AND">
            <if test="id!=0">AND bg_sterling_screening.id = #{id}</if>
            <if test="status!=null">AND bg_sterling_screening.status = #{status}</if>
            <if test="disputeStatus!=null">AND bg_sterling_screening.dispute_status = #{disputeStatus}</if>
            <if test="result!=null">AND bg_sterling_screening.result = #{result}</if>
        </trim>
    </sql>


    <resultMap type="com.vipkid.trpm.entity.BackgroundScreening" id="backgroundScreeningResultMap">
        <id column="bg_sterling_screening_id" property="id"/>
        <result column="bg_sterling_screening_teacher_id" property="teacherId"/>
        <result column="bg_sterling_screening_candidate_id" property="candidateId"/>
        <result column="bg_sterling_screening_screening_id" property="screeningId"/>
        <result column="bg_sterling_screening_status" property="status"/>
        <result column="bg_sterling_screening_result" property="result"/>
        <result column="bg_sterling_screening_dispute_status" property="disputeStatus"/>
        <result column="bg_sterling_screening_dispute_created_at" property="disputeCreatedAt"/>
        <result column="bg_sterling_screening_submitted_at" property="submittedAt"/>
        <result column="bg_sterling_screening_update_at" property="updateAt"/>
        <result column="bg_sterling_screening_web_link" property="webLink"/>
        <result column="bg_sterling_screening_pdf_link" property="pdfLink"/>
        <result column="bg_sterling_screening_create_time" property="createTime"/>
        <result column="bg_sterling_screening_update_time" property="updateTime"/>
    </resultMap>

    <select id="findByTeacherId" resultMap="backgroundScreeningResultMap">
        SELECT
        <include refid="backgroundScreeningColumns"/>
        FROM bg_sterling_screening
        WHERE bg_sterling_screening.teacher_id = #{tacherId}
        ORDER BY id DESC LIMIT 1
    </select>


</mapper>

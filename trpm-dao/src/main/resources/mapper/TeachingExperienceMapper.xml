<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="TeachingExperienceMapper">

	<sql id="TeachingExperienceColumns">
		teaching_experience.id AS teaching_experience_id, 
		teaching_experience.teacher_id AS teaching_experience_teacher_id,
		teaching_experience.organisation_name AS teaching_experience_organisation_name,
		teaching_experience.job_title AS teaching_experience_job_title,
		teaching_experience.time_period_start AS teaching_experience_time_period_start, 
		teaching_experience.time_period_end AS teaching_experience_time_period_end,
		teaching_experience.hours_week AS teaching_experience_hours_week,
		teaching_experience.total_hours AS teaching_experience_total_hours,
		teaching_experience.job_description AS teaching_experience_job_description,
		teaching_experience.create_time AS teaching_experience_create_time,
		teaching_experience.update_time AS teaching_experience_update_time,
		teaching_experience.create_id AS teaching_experience_create_id,
		teaching_experience.update_id AS teaching_experience_update_id,
		teaching_experience.status AS teaching_experience_status
	</sql>

	<sql id="TeachingExperienceWhere">
		<trim prefix="WHERE" prefixOverrides="AND">
			<if test="id!=0">AND teaching_experience.id = #{id}</if>
			<if test="teacherId!=0">AND teaching_experience.teacher_id = #{teacherId}</if>
			<if test="organisationName!=null">AND teaching_experience.organisation_name = #{organisationName}</if>
			<if test="jobTitle!=null">AND teaching_experience.job_title = #{jobTitle}</if>
			<if test="timePeriodStart!=null">AND teaching_experience.time_period_start = #{timePeriodStart}</if>
			<if test="timePeriodEnd!=null">AND teaching_experience.time_period_end = #{timePeriodEnd}</if>
			<if test="hoursWeek!=0">AND teaching_experience.hours_week = #{hoursWeek}</if>
			<if test="totalHours!=0">AND teaching_experience.total_hours = #{totalHours}</if>
			<if test="jobDescription!=null">AND teaching_experience.job_description = #{jobDescription}</if>
			<if test="createTime!=null">AND teaching_experience.create_time = #{createTime}</if>
			<if test="updateTime!=null">AND teaching_experience.update_time = #{updateTime}</if>
			<if test="createId!=0">AND teaching_experience.create_id = #{createId}</if>
			<if test="updateId!=0">AND teaching_experience.update_id = #{updateId}</if>
			<if test="status!=0">AND teaching_experience.status = #{status}</if>
		</trim>
	</sql>

	<sql id="TeachingExperienceOrder">
		<if test="orderString!=null">ORDER BY ${orderString}</if>
	</sql>

	<sql id="TeachingExperienceLimit">LIMIT #{startLine},#{limitLine}</sql>

	<resultMap type="com.vipkid.trpm.entity.TeachingExperience" id="TeachingExperienceResultMap">
		<id column="teaching_experience_id" property="id" />
		<result column="teaching_experience_teacher_id" property="teacherId" />
		<result column="teaching_experience_organisation_name" property="organisationName" />
		<result column="teaching_experience_job_title" property="jobTitle" />
		<result column="teaching_experience_time_period_start" property="timePeriodStart" />
		<result column="teaching_experience_time_period_end" property="timePeriodEnd" />
		<result column="teaching_experience_hours_week" property="hoursWeek" />
		<result column="teaching_experience_total_hours" property="totalHours" />
		<result column="teaching_experience_job_description" property="jobDescription" />
		<result column="teaching_experience_create_time" property="createTime" />
		<result column="teaching_experience_update_time" property="updateTime" />
		<result column="teaching_experience_create_id" property="createId" />
		<result column="teaching_experience_update_id" property="updateId" />
		<result column="teaching_experience_status" property="status" />
	</resultMap>

	<select id="findDao" resultMap="TeachingExperienceResultMap">
		SELECT
		<include refid="TeachingExperienceColumns" />
		FROM teaching_experience
		<include refid="TeachingExperienceWhere" />
		<include refid="TeachingExperienceOrder" />
	</select>

	<select id="countDao" resultType="int">
		SELECT COUNT(*) FROM teaching_experience
		<include refid="TeachingExperienceWhere" />
	</select>

	<select id="pageDao" resultMap="TeachingExperienceResultMap">
		SELECT
		<include refid="TeachingExperienceColumns" />
		FROM teaching_experience
		<include refid="TeachingExperienceWhere" />
		<include refid="TeachingExperienceOrder" />
		<include refid="TeachingExperienceLimit" />
	</select>

	<select id="limitDao" resultMap="TeachingExperienceResultMap">
		SELECT
		<include refid="TeachingExperienceColumns" />
		FROM teaching_experience
		<include refid="TeachingExperienceWhere" />
		<include refid="TeachingExperienceOrder" />
		<include refid="TeachingExperienceLimit" />
	</select>

	<insert id="saveDao" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO teaching_experience
		<trim prefix="(" prefixOverrides=",">
			<if test="id!=0">,id</if>
			<if test="teacherId!=0">,teacher_id</if>
			<if test="organisationName!=null">,organisation_name</if>
			<if test="jobTitle!=null">,job_title</if>
			<if test="timePeriodStart!=null">,time_period_start</if>
			<if test="timePeriodEnd!=null">,time_period_end</if>
			<if test="hoursWeek!=-1">,hours_week</if>
			<if test="totalHours!=-1">,total_hours</if>
			<if test="jobDescription!=null">,job_description</if>
			<if test="createTime!=null">,create_time</if>
			<if test="updateTime!=null">,update_time</if>
			<if test="createId!=0">,create_id</if>
			<if test="updateId!=0">,update_id</if>
			<if test="status!=0">,status</if>
		</trim>
		) VALUES
		<trim prefix="(" prefixOverrides=",">
			<if test="id!=0">,#{id}</if>
			<if test="teacherId!=0">,#{teacherId}</if>
			<if test="organisationName!=null">,#{organisationName}</if>
			<if test="jobTitle!=null">,#{jobTitle}</if>
			<if test="timePeriodStart!=null">,#{timePeriodStart}</if>
			<if test="timePeriodEnd!=null">,#{timePeriodEnd}</if>
			<if test="hoursWeek!=-1">,#{hoursWeek}</if>
			<if test="totalHours!=-1">,#{totalHours}</if>
			<if test="jobDescription!=null">,#{jobDescription}</if>
			<if test="createTime!=null">,#{createTime}</if>
			<if test="updateTime!=null">,#{updateTime}</if>
			<if test="createId!=0">,#{createId}</if>
			<if test="updateId!=0">,#{updateId}</if>
			<if test="status!=0">,#{status}</if>
		</trim>
		)
	</insert>

	<update id="updateDao">
		UPDATE teaching_experience
		<trim prefix="SET" prefixOverrides=",">
			<if test="id!=0">,id = #{id}</if>
			<if test="teacherId!=0">,teacher_id = #{teacherId}</if>
			<if test="organisationName!=null">,organisation_name = #{organisationName}</if>
			<if test="jobTitle!=null">,job_title = #{jobTitle}</if>
			<if test="timePeriodStart!=null">,time_period_start = #{timePeriodStart}</if>
			<if test="timePeriodEnd!=null">,time_period_end = #{timePeriodEnd}</if>
			<if test="hoursWeek!=-1">,hours_week = #{hoursWeek}</if>
			<if test="totalHours!=-1">,total_hours = #{totalHours}</if>
			<if test="jobDescription!=null">,job_description = #{jobDescription}</if>
			<if test="createTime!=null">,create_time = #{createTime}</if>
			<if test="updateTime!=null">,update_time = #{updateTime}</if>
			<if test="createId!=0">,create_id = #{createId}</if>
			<if test="updateId!=0">,update_id = #{updateId}</if>
			<if test="status!=0">,status = #{status}</if>
		</trim>
		<trim prefix="WHERE" prefixOverrides="AND">AND id = #{id}</trim>
	</update>

	<delete id="deleteDao">
		DELETE FROM teaching_experience
		<trim prefix="WHERE" prefixOverrides="AND">AND id = #{id}</trim>
	</delete>

	<!-- 获取招聘渠道列表 -->
	<select id="findRecruitingChannel" resultType="java.util.Map">
		SELECT u.id as id,u.name as name
		FROM partner t JOIN user u ON t.id = u.id 
		WHERE u.name is not null 
		<if test="type != null"> AND t.type = #{type} </if> 
		<if test="status != null"> AND u.status = #{status} </if>
		<if test="dtype != null"> AND u.dtype = #{dtype}</if>
		ORDER BY u.name
	</select>

</mapper>

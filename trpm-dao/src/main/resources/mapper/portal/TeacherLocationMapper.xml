<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="TeacherLocationMapper">

	<cache eviction="FIFO" size="102400" readOnly="true" flushInterval="600000" />
    
    <sql id="teacherLocationColumns">
    teacher_location.id AS teacher_location_id, teacher_location.parent_id AS teacher_location_parent_id,
    teacher_location.name AS teacher_location_name, teacher_location.description AS teacher_location_description,
    teacher_location.sort AS teacher_location_sort, teacher_location.level AS teacher_location_level, 
    teacher_location.comment AS teacher_location_comment,
    teacher_location.timezone AS teacher_location_timezone
    </sql>
    
    <sql id="teacherLocationWhere">
        <trim prefix="WHERE" prefixOverrides="AND">
            <if test="id!=0">AND teacher_location.id = #{id}</if>
            <if test="parentId!=-1">AND teacher_location.parent_id = #{parentId}</if>
            <if test="name!=null">AND teacher_location.name = #{name}</if>
            <if test="description!=null">AND teacher_location.description = #{description}</if>
            <if test="sort!=0">AND teacher_location.sort = #{sort}</if>
            <if test="level!=0">AND teacher_location.level = #{level}</if>
            <if test="comment!=null">AND teacher_location.comment = #{comment}</if>
            <if test="timezone!=null">AND teacher_location.timezone = #{timezone}</if>
        </trim>
    </sql>
    
    <sql id="teacherLocationOrder">
        <if test="orderString!=null">ORDER BY ${orderString}</if>
    </sql>
    
    <sql id="teacherLocationLimit">LIMIT #{startLine},#{limitLine}</sql>
    
    <resultMap type="com.vipkid.trpm.entity.TeacherLocation" id="teacherLocationResultMap">
        <id column="teacher_location_id" property="id" />
        <result column="teacher_location_parent_id" property="parentId" />
        <result column="teacher_location_name" property="name" />
        <result column="teacher_location_description" property="description" />
        <result column="teacher_location_sort" property="sort" />
        <result column="teacher_location_level" property="level" />
        <result column="teacher_location_comment" property="comment" />
        <result column="teacher_location_timezone" property="timezone" />
    </resultMap>
    
    <select id="findDao" resultMap="teacherLocationResultMap">
        SELECT
        <include refid="teacherLocationColumns" />
        FROM teacher_location
        <include refid="teacherLocationWhere" />
        <include refid="teacherLocationOrder" />
    </select>
    
    <select id="countDao" resultType="int">
        SELECT COUNT(*) FROM teacher_location
        <include refid="teacherLocationWhere" />
    </select>
    
    <select id="pageDao" resultMap="teacherLocationResultMap">
        SELECT
        <include refid="teacherLocationColumns" />
        FROM teacher_location
        <include refid="teacherLocationWhere" />
        <include refid="teacherLocationOrder" />
        <include refid="teacherLocationLimit" />
    </select>
    
    <select id="limitDao" resultMap="teacherLocationResultMap">
        SELECT
        <include refid="teacherLocationColumns" />
        FROM teacher_location
        <include refid="teacherLocationWhere" />
        <include refid="teacherLocationOrder" />
        <include refid="teacherLocationLimit" />
    </select>
    
    <insert id="saveDao" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO teacher_location
        <trim prefix="(" prefixOverrides=",">
            <if test="id!=0">,id</if>
            <if test="parentId!=-1">,parent_id</if>
            <if test="name!=null">,name</if>
            <if test="description!=null">,description</if>
            <if test="sort!=0">,sort</if>
            <if test="level!=0">,level</if>
            <if test="comment!=null">,comment</if>
            <if test="timezone!=null">,timezone</if>
        </trim>
        ) VALUES
        <trim prefix="(" prefixOverrides=",">
            <if test="id!=0">,#{id}</if>
            <if test="parentId!=-1">,#{parentId}</if>
            <if test="name!=null">,#{name}</if>
            <if test="description!=null">,#{description}</if>
            <if test="sort!=0">,#{sort}</if>
            <if test="level!=0">,#{level}</if>
            <if test="comment!=null">,#{comment}</if>
            <if test="timezone!=null">,#{timezone}</if>
        </trim>
        )
    </insert>
    
    <update id="updateDao">
        UPDATE teacher_location
        <trim prefix="SET" prefixOverrides=",">
            <if test="id!=0">,id = #{id}</if>
            <if test="parentId!=-1">,parent_id = #{parentId}</if>
            <if test="name!=null">,name = #{name}</if>
            <if test="description!=null">,description = #{description}</if>
            <if test="sort!=0">,sort = #{sort}</if>
            <if test="level!=0">,level = #{level}</if>
            <if test="comment!=null">,comment = #{comment}</if>
            <if test="timezone!=null">,timezone = #{timezone}</if>
        </trim>
        <trim prefix="WHERE" prefixOverrides="AND">AND id = #{id}</trim>
    </update>
    
    <delete id="deleteDao">
        DELETE FROM teacher_location
        <trim prefix="WHERE" prefixOverrides="AND">AND id = #{id}</trim>
    </delete>
    
</mapper>

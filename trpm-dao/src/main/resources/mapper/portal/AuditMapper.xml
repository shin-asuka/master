<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AuditMapper">

	<sql id="auditColumns">audit.id AS audit_id, audit.category AS audit_category, audit.execute_date_time AS
		audit_execute_date_time, audit.level AS audit_level, audit.operation AS audit_operation,
		audit.operator AS audit_operator</sql>

	<sql id="auditWhere">
		<trim prefix="WHERE" prefixOverrides="AND">
			<if test="id!=0">AND audit.id = #{id}</if>
			<if test="category!=null">AND audit.category = #{category}</if>
			<if test="executeDateTime!=null">AND audit.execute_date_time = #{executeDateTime}</if>
			<if test="level!=null">AND audit.level = #{level}</if>
			<if test="operation!=null">AND audit.operation = #{operation}</if>
			<if test="operator!=null">AND audit.operator = #{operator}</if>
		</trim>
	</sql>

	<sql id="auditOrder">
		<if test="orderString!=null">ORDER BY ${orderString}</if>
	</sql>

	<sql id="auditLimit">LIMIT #{startLine},#{limitLine}</sql>

	<resultMap type="com.vipkid.trpm.entity.Audit" id="auditResultMap">
		<id column="audit_id" property="id" />
		<result column="audit_category" property="category" />
		<result column="audit_execute_date_time" property="executeDateTime" />
		<result column="audit_level" property="level" />
		<result column="audit_operation" property="operation" />
		<result column="audit_operator" property="operator" />
	</resultMap>

	<select id="findDao" resultMap="auditResultMap">
		SELECT
		<include refid="auditColumns" />
		FROM audit
		<include refid="auditWhere" />
		<include refid="auditOrder" />
	</select>

	<select id="countDao" resultType="int">
		SELECT COUNT(*) FROM audit
		<include refid="auditWhere" />
	</select>

	<select id="pageDao" resultMap="auditResultMap">
		SELECT
		<include refid="auditColumns" />
		FROM audit
		<include refid="auditWhere" />
		<include refid="auditOrder" />
		<include refid="auditLimit" />
	</select>

	<select id="limitDao" resultMap="auditResultMap">
		SELECT
		<include refid="auditColumns" />
		FROM audit
		<include refid="auditWhere" />
		<include refid="auditOrder" />
		<include refid="auditLimit" />
	</select>

	<insert id="saveDao" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO audit
		<trim prefix="(" prefixOverrides=",">
			<if test="id!=0">,id</if>
			<if test="category!=null">,category</if>
			<if test="executeDateTime!=null">,execute_date_time</if>
			<if test="level!=null">,level</if>
			<if test="operation!=null">,operation</if>
			<if test="operator!=null">,operator</if>
		</trim>
		) VALUES
		<trim prefix="(" prefixOverrides=",">
			<if test="id!=0">,#{id}</if>
			<if test="category!=null">,#{category}</if>
			<if test="executeDateTime!=null">,#{executeDateTime}</if>
			<if test="level!=null">,#{level}</if>
			<if test="operation!=null">,#{operation}</if>
			<if test="operator!=null">,#{operator}</if>
		</trim>
		)
	</insert>

	<update id="updateDao">
		UPDATE audit
		<trim prefix="SET" prefixOverrides=",">
			<if test="id!=0">,id = #{id}</if>
			<if test="category!=null">,category = #{category}</if>
			<if test="executeDateTime!=null">,execute_date_time = #{executeDateTime}</if>
			<if test="level!=null">,level = #{level}</if>
			<if test="operation!=null">,operation = #{operation}</if>
			<if test="operator!=null">,operator = #{operator}</if>
		</trim>
		<trim prefix="WHERE" prefixOverrides="AND">AND id = #{id}</trim>
	</update>

	<delete id="deleteDao">
		DELETE FROM audit
		<trim prefix="WHERE" prefixOverrides="AND">AND id = #{id}</trim>
	</delete>

</mapper>

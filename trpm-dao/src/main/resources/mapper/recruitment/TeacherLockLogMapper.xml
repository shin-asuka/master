<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="TeacherLockLogMapper">

	<sql id="TeacherLockLogColumns">
		teacher_lock_log.id AS teacher_lock_log_id, 
		teacher_lock_log.teacher_id AS teacher_lock_log_teacher_id,
		teacher_lock_log.reason AS teacher_lock_log_reason,
		teacher_lock_log.life_cycle AS teacher_lock_log_life_cycle,
		teacher_lock_log.is_unlocked AS teacher_lock_log_is_unlocked,
		teacher_lock_log.operator_id AS teacher_lock_log_operator_id,
		teacher_lock_log.create_date_time AS teacher_lock_log_create_date_time
	</sql>

	<sql id="TeacherLockLogWhere">
		<trim prefix="WHERE" prefixOverrides="AND">
			<if test="id!=null">AND teacher_lock_log.id = #{id}</if>
			<if test="teacherId!=null">AND teacher_lock_log.teacher_id = #{teacherId}</if>
			<if test="reason!=null">AND teacher_lock_log.reason = #{reason}</if>
			<if test="lifeCycle!=null">AND teacher_lock_log.life_cycle = #{lifeCycle}</if>
			<if test="isUnlocked!=null">AND teacher_lock_log.is_unlocked = #{isUnlocked}</if>
			<if test="operatorId!=null">AND teacher_lock_log.operator_id = #{operatorId}</if>
			<if test="createDateTime!=null">AND teacher_lock_log.create_date_time = #{createDateTime}</if>
		</trim>
	</sql>

	<sql id="TeacherLockLogOrder">
		<if test="orderString!=null">ORDER BY ${orderString}</if>
	</sql>

	<sql id="TeacherLockLogLimit">LIMIT #{startLine},#{limitLine}</sql>

	<resultMap type="com.vipkid.recruitment.entity.TeacherLockLog" id="TeacherLockLogResultMap">
		<id column="teacher_lock_log_id" property="id" />
		<result column="teacher_lock_log_teacher_id" property="teacherId" />
		<result column="teacher_lock_log_reason" property="reason" />
		<result column="teacher_lock_log_life_cycle" property="lifeCycle" />
		<result column="teacher_lock_log_is_unlocked" property="isUnlocked" />
		<result column="teacher_lock_log_operator_id" property="operatorId" />
		<result column="teacher_lock_log_create_date_time" property="createDateTime" />
	</resultMap>

	<select id="findDao" resultMap="TeacherLockLogResultMap">
		SELECT
		<include refid="TeacherLockLogColumns" />
		FROM teacher_lock_log
		<include refid="TeacherLockLogWhere" />
		<include refid="TeacherLockLogOrder" />
	</select>

	<select id="countDao" resultType="int">
		SELECT COUNT(*) FROM teacher_lock_log
		<include refid="TeacherLockLogWhere" />
	</select>

	<select id="pageDao" resultMap="TeacherLockLogResultMap">
		SELECT
		<include refid="TeacherLockLogColumns" />
		FROM teacher_lock_log
		<include refid="TeacherLockLogWhere" />
		<include refid="TeacherLockLogOrder" />
		<include refid="TeacherLockLogLimit" />
	</select>

	<select id="limitDao" resultMap="TeacherLockLogResultMap">
		SELECT
		<include refid="TeacherLockLogColumns" />
		FROM teacher_lock_log
		<include refid="TeacherLockLogWhere" />
		<include refid="TeacherLockLogOrder" />
		<include refid="TeacherLockLogLimit" />
	</select>

	<insert id="saveDao" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO teacher_lock_log
		<trim prefix="(" prefixOverrides=",">
			<if test="id!=null">,id</if>
			<if test="teacherId!=null">,teacher_id</if>
			<if test="reason!=null">,reason</if>
			<if test="lifeCycle!=null">,life_cycle</if>
			<if test="isUnlocked!=null">,is_unlocked</if>
			<if test="operatorId!=null">,operator_id</if>
			<if test="createDateTime!=null">,create_date_time</if>
		</trim>
		) VALUES
		<trim prefix="(" prefixOverrides=",">
			<if test="id!=null">,#{id}</if>
			<if test="teacherId!=null">,#{teacherId}</if>
			<if test="reason!=null">,#{reason}</if>
			<if test="lifeCycle!=null">,#{lifeCycle}</if>
			<if test="isUnlocked!=null">,#{isUnlocked}</if>
			<if test="operatorId!=null">,#{operatorId}</if>
			<if test="createDateTime!=null">,#{createDateTime}</if>
		</trim>
		)
	</insert>

	<update id="updateDao">
		UPDATE teacher_lock_log
		<trim prefix="SET" prefixOverrides=",">
			<if test="id!=null">,id = #{id}</if>
			<if test="teacherId!=null">,teacher_id = #{teacherId}</if>
			<if test="reason!=null">,reason = #{reason}</if>
			<if test="lifeCycle!=null">,life_cycle = #{lifeCycle}</if>
			<if test="isUnlocked!=null">,is_unlocked = #{isUnlocked}</if>
			<if test="operatorId!=null">,operator_id = #{operatorId}</if>
			<if test="createDateTime!=null">,create_date_time = #{createDateTime}</if>
		</trim>
		<trim prefix="WHERE" prefixOverrides="AND">AND id = #{id}</trim>
	</update>

	<update id="unlockByTeacherIdReasonStatus">
		UPDATE teacher_lock_log
		SET is_unlocked = 1
		<trim prefix="WHERE" prefixOverrides="AND">
			<if test="teacherId!=null">AND teacher_id = #{teacherId}</if>
			<if test="reason!=null">AND reason = #{reason}</if>
			<if test="lifeCycle!=null">AND life_cycle = #{lifeCycle}</if>
		</trim>
	</update>

	<delete id="deleteDao">
		DELETE FROM teacher_lock_log
		<trim prefix="WHERE" prefixOverrides="AND">AND id = #{id}</trim>
	</delete>

</mapper>

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="TeacherContractFileMapper">


    <sql id="teacherContractFileColumns">
        teacher_contract_file.id AS id,
        teacher_contract_file.teacher_id AS teacherId,
        teacher_contract_file.file_url AS url,
        teacher_contract_file.file_type AS fileType,
        teacher_contract_file.create_time AS createTime,
        teacher_contract_file.update_time AS updateTime,
        teacher_contract_file.create_id AS createId,
        teacher_contract_file.update_id AS updateId,
        teacher_contract_file.teacher_application_id AS teacherApplicationId,
        teacher_contract_file.fail_reason AS failReason,
        teacher_contract_file.result AS result,
        teacher_contract_file.screening_id AS screeningId
    </sql>
    <insert id="saveDao" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO teacher_contract_file
        <trim prefix="(" prefixOverrides=",">
            <if test="id!=0">,id</if>
            <if test="teacherId!=0">,teacher_id</if>
            <if test="url!=null">,file_url</if>
            <if test="fileType!=null">,file_type</if>
            <if test="createTime!=null">,create_time</if>
            <if test="updateTime!=null">,update_time</if>
            <if test="createId!=null">,create_id</if>
            <if test="updateId!=null">,update_id</if>
            <if test="teacherApplicationId!=-1">,teacher_application_id</if>
            <if test="failReason!=null">,fail_reason</if>
            <if test="result!=null">,result</if>
            <if test="screeningId!=null">,screening_id</if>
        </trim>
        ) VALUES
        <trim prefix="(" prefixOverrides=",">
            <if test="id!=0">,#{id}</if>
            <if test="teacherId!=0">,#{teacherId}</if>
            <if test="url!=null">,#{url}</if>
            <if test="fileType!=null">,#{fileType}</if>
            <if test="createTime!=null">,#{createTime}</if>
            <if test="updateTime!=null">,#{updateTime}</if>
            <if test="createId!=null">,#{createId}</if>
            <if test="updateId!=null">,#{updateId}</if>
            <if test="teacherApplicationId!=-1">,#{teacherApplicationId}</if>
            <if test="failReason!=null">,#{failReason}</if>
            <if test="result!=null">,#{result}</if>
            <if test="screeningId!=null">,#{screeningId}</if>
        </trim>
        )
    </insert>

    <select id="findByTeacherIdAndTeacherApplicationId"  resultType="com.vipkid.recruitment.entity.TeacherContractFile" >
        SELECT
        <include refid="teacherContractFileColumns"/>
        FROM teacher_contract_file
        WHERE
        teacher_contract_file.teacher_id =#{teacherId}
        AND
        teacher_contract_file.teacher_application_id=#{teacherApplicationId}

    </select>


    <select id="findByTeacherId"  resultType="com.vipkid.recruitment.entity.TeacherContractFile" >
        SELECT
        <include refid="teacherContractFileColumns"/>
        FROM teacher_contract_file
        WHERE
        teacher_contract_file.teacher_id =#{teacherId}
    </select>


    <select id="findById"  resultType="com.vipkid.recruitment.entity.TeacherContractFile" >
        SELECT
        <include refid="teacherContractFileColumns"/>
        FROM teacher_contract_file
        WHERE
        teacher_contract_file.id =#{id}
    </select>


    <update id="updateDao">
        UPDATE teacher_contract_file
        <trim prefix="SET" prefixOverrides=",">
                <if test="id!=0">,id=#{id}</if>
                <if test="teacherId!=0">,teacher_id = #{teacherId}</if>
                <if test="url!=null">,file_url=#{url}</if>
                <if test="fileType!=null">,file_type=#{fileType}</if>
                <if test="createTime!=null">, create_time=#{createTime}</if>
                <if test="updateTime!=null">,update_time = #{updateTime}</if>
                <if test="createId!=null">,create_id=#{createId}</if>
                <if test="updateId!=null">,update_id = #{updateId}</if>
                <if test="teacherApplicationId!=-1">,teacher_application_id = #{teacherApplicationId}</if>
                <if test="failReason!=null">,fail_reason = #{failReason}</if>
                <if test="result!=null">,result = #{result}</if>
            </trim>
        <trim prefix="WHERE" prefixOverrides="AND">AND id = #{id}</trim>
    </update>


    <delete id="deleteDao">
        DELETE FROM teacher_contract_file
        <trim prefix="WHERE" prefixOverrides="AND">AND id = #{id}</trim>
    </delete>

    <select id="findBackgroundFileByTeacherId"  resultType="com.vipkid.recruitment.entity.TeacherContractFile" >
        SELECT
        <include refid="teacherContractFileColumns"/>
        FROM teacher_contract_file
        WHERE
        teacher_contract_file.teacher_id =#{teacherId}
        AND
        teacher_contract_file.screening_id=#{screeningId}
        AND teacher_contract_file.file_type IN (9,10,11)

    </select>

</mapper>